eTriops Tech Docs

GAME STATE:
The game state is encoded using a dictionary format to hold the game's core variables:

gamestate = {'name': 'unnamed', 'age': 0, 'tod': 0, 'hcap': 100, 'health': 100, 'hunger': 100, 'ammonia': 0, 'foodInTank': 0, 'eggs': 0}
    
name       - Holds the name of the current triops
age        - Age of the triops in days
tod        - "Time Of Day"; number of ticks since the current day started
hcap       - "Health Cap"; the maximum health the triops can attain under current conditions
health     - the current health of the triops
hunger     - how "full" the triops is, food-wise. A lower value indicates the triops is hungry
ammonia    - how much ammonia is currently in the tank
foodInTank - how much food is in the tank
eggs       - total number of eggs that the triops has laid

Game state is written to the file "etriops.sav" periodically, as well as on quitting the program. The program will attempt to load the game state from this file upon starting. 


TICKS AND INCREMENT/DECREMENT RATES:
The game ticks once per second. On each tick, the program will recompute the game state and update its values accordingly. After 86,400 ticks (the number of seconds in a 24-hour day) the triops' age will increase by 1 and the Time-Of-Day counter will reset to 0. Values are calibrated to increase/decrease at a rate that roughly emulates a real life triops:

Health     - Increases at 0.08333 per tick, enough to restore 50HP over the course of about 10 minutes. This is to emulate a triops' natural healing/recovery ability.
Hunger     - Decreases at 0.00092 per tick, enough to leave a triops at about 20 hunger after a 24 hour period. 
Ammonia    - Increases at 0.00008 per tick, enough for it to hit 100 in a little over 14 days. Emulates the slow buildup of ammonia in an un-cycled aquarium.
Health Cap - Half the value of the ammonia subtracted from 100. For example, if the current ammonia level is 10 then the health cap will be 95 (100 - (10/2)). Meant to emulate how toxic water conditions impact a triops' overall health.

Special Cases:
- If health is already at the health cap then it won't increase.
- If hunger reaches 0 then health won't regen, and will in fact take a 0.00462 hit per tick. At this rate a starving triops (that is otherwise healthy) will die in approx. 6 hours.
- Any uneaten food pellets left in the aquarium will add an additional 0.00008 ammonia per pellet per tick. This is to emulate how overfeeding can lead to water toxicity.

Note that it is possible for ammonia to go over 100! Given how the health cap is calculated it's theoretically possible for ammonia to reach as high as 200 before the tank becomes mathmatically uninhabitable. In practice, however, a tank with extremely high ammonia levels will put a triops at risk, as its health will be severely capped and it won't be able to cope with other health hazards (such as molting) as easily. 

Random Events:
- On any given tick a triops has a 1 in 259,200 chance of molting. This rate is sufficient enough to molt on average once every 3 days. 
- On any given tick a triops has a 1 in 259,200 chance of laying eggs. Like with molting, this should result in an average rate of once every 3 or so days. Note that triops only have a chance of laying eggs once they mature at age 14.

MOLTING: 
When molting, a triops will take a hit to their health, with the amount of damage increasing with age. This is to emulate how molting for a real-life triops gets progressively harder as they get older. The algorithm for computing the amount of molt damage is:

random int 1..10 + age

However, for the purposes of computing molt damage the age variable is capped at 93. This is to ensure that a triops always has at least a very small chance of survival and there are no artificial limits on its lifespan. With age at 93, if the random int is anything under 5 an otherwise-healthy triops will just barely survive, whereas if the random int is above a 5 they likely won't. 


EGGS:
When a triops goes to lay it has a random chance of producing anywhere from 10 to 30 eggs, which will be added to the triop's total egg count. The lifetime count will be reported after the triops' death and serve as a sort of final score. If the triops' health is between 20 and 40 then the number of eggs it would have laid gets cut in half. If the triops' health is less than 20 then it can't lay eggs at all. This is to emulate how poor health can impact vitality in a real-world animal. 